<html>
<head>
    <title>Hail.</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,600|Rozha+One" rel="stylesheet">
    <style>
        *:focus {
            outline: none;
        }

        label {
            display: block;
            padding: 15px 0;
        }

        input[type=button], input[type=submit] {
            transition: background .1s ease-in-out;
            border: none;
            background: #03A9F4;
            color: white;
            text-transform: uppercase;
            font-weight: 600;
            font-size: 14px;
            padding: 8px 15px;
            border-radius: 100px;
            margin: auto;
            display: block;
        }

        body#y input[type=button], body#y input[type=submit] {
            background: #4CAF50;
        }

        body#n input[type=button], body#n input[type=submit] {
            background: #F44336;
        }

        #correct, #incorrect, #answer, #left {
            font-weight: 600;
        }
    </style>
</head>
<body style="font-family: 'Montserrat', sans-serif; background: #F3F3F3; max-width: 800px; margin: auto;">
<div id="select" style="background: white; margin: 15px; padding: 15px; box-shadow: 3px 3px 8px rgba(0,0,0,.03); border: 1px solid rgba(0,0,0,.03);"></div>
<div id="game" style="background: white; margin: 15px; padding: 15px;box-shadow: 3px 3px 8px rgba(0,0,0,.03); border: 1px solid rgba(0,0,0,.03); display: none;">
    <div id="word" style="text-align: center; font-size: 24px; margin-bottom: 10px; weight: 600; text-transform: capitalize; font-family: 'Rozha One'">
        WORD
    </div>
    <form onsubmit="c(); return false;">
        <input type="text" id="word-i" spellcheck="false" autocomplete="off" style="background: rgba(0,0,0,.06); border: none; border-radius: 100px; margin: auto; display: block; max-width: 360px; width: 100%; padding: 10px 20px; border: 1px solid rgba(0,0,0,.03)" autofocus="">
        <div style="display: flex; margin-top: 15px; align-items: center; justify-content: center">
            <input type="button" value="ä" onclick="f(this.value)" style="margin: 5px;">
            <input type="button" value="ö" onclick="f(this.value)" style="margin: 5px;">
            <input type="button" value="ü" onclick="f(this.value)" style="margin: 5px;">
            <input type="button" value="ß" onclick="f(this.value)" style="margin: 5px;">
        </div>
        <div style="display: flex; margin-top: 15px; align-items: center; justify-content: center">
            <input type="submit" value="Sprawdź" style="margin: 5px;">
            <input type="button" value="Następne" style="margin: 5px; background: rgba(0,0,0,.06); color: #333;" onclick="n()">
        </div>
    </form>
    <div style="text-align: center">Poprawne odpowiedzi: <span id="correct">0</span></div>
    <div style="text-align: center">Błędne odpowiedzi: <span id="incorrect">0</span></div>
    <div style="text-align: center">Poprawna odpowiedź: <span id="answer">-</span></div>
    <div style="text-align: center">Pozostało: <span id="left">0</span></div>
    <label style="display: block; text-align: center;">
        <input type="checkbox" id="iu" checked="">
        Nie sprawdzaj wielkości znaków
    </label>
    <label style="display: block; text-align: center;">
        <input type="checkbox" id="id" checked="">
        Nie sprawdzaj znaków diaktrycznych (ä, ö, ü, ß)
    </label>
</div>


<script>
    var a = {
        "Angielski": {
//            "w zawieszeniu": "in abeyance",
//            "być bezdomnym\; nie mieć stałego miejsca zamieszkania": "be of/have no fixed abode",
//            "być poza domem": "out and about",
//            "w skrócie\; ogółem": "in the abstract, in short, in brief, in a nutshell",
//            "w długach": "in arrears, in the red, in the hole, in debt",
//            "z własnej woli\; samoczynnie\; automatycznie": "of its own accord",
//            "zaprzestać kłótni, ponieważ nie ma możliwości na porozumienie": "agree to differ/disagree",
//            "zabronione\; zapomniane (o miejscu)": "out of bounds",
//            "krytykować\; dosłownie - rzucać oszczerstwami": "cast aspersions",
//            "być bardzo drogim": "cost an arm and a leg, cost a small fortune",
//            "być uważnym i szybkim w działaniu": "on the ball",
//            "być zaskoczonym, zmieszanym": "be thrown off balance",
//            "poniżej pasa": "below the belt",
//            "czekać na odpowiedni moment": "bide one's time",
//            "być ekstremalnie złym/podekscytowanym": "be beside oneself with anger/excitement",
//            "wynaleźć/odkryć coś nowego\;\"wytyczać szlak\"": "blaze a trail",
//            "zepsuć się\; przestać działać poprawnie (o urządzeniach)": "on the blink, out of order",
//            "nie być nikomu dłużnym pieniędzy": "in the black",
//            "ograniczyć do minimum": "cut to the bone",
//            "prosić kogoś o pomoc\; pytać ekspertów": "pick someone's brains",
//            "zostać zignorowanym lub odrzuconym": "go by the board",
            "remove suspicion/bad feeling": "clear the air",
            "from the beginning until now": "all along",
            "nearly, almost": "all but",
            "exhausted": "all in",
            "when everything is considered": "all in all",
            "yet, however": "all the same",
            "altogether, in total": "all told",
            "be very precious to sb; be sb's favourite": "be the apple of sb's eye",
            "be very angry": "be up in arms",
            "in spite of": "for all",
            "I don't care": "for all I care",
            "as far as I know": "for all I know",
            "while performing the act": "in the act of",
            "uncertain (1b)": "in the air",
            "take special curcumstances into consideration": "make allowances for",
            "try to compensate for a past action": "make amends for",
            "used to express annoyance/surprise": "of all people",
            "because of": "an account of",
            "under/in no circumstances": "on no account",
            "broadcasting": "on the air",
            "watchful and prepared/on the lockout/expecting sth": "on the alert",
            "consider sth": "take sth into account",
            "for this/that reason": "on this/that account",
            "make sb eager to have/experience more": "whet sb's appetite",
            "existing, but not talked about": "up in the air",

            "honest": "above board",
            "have a false idea about sth": "bark up the wrong tree",
            "have no/very litte money": "be broke",
            "be very lively": "be full of beans",
            "out of favour": "be in sb's black books",
            "avoid saying what one means directly": "beat about/around the bush",
            "in prison": "behind bars",
            "conceited; boastful": "big-headed",
            "covered with bruises": "black and blue all over",
            "sth which appears bad at first but then turns out favourably": "blessing in disguise",
            "a favoured person": "blue-eyed boy/golden boy",
            "suddenly": "bolt from the blue",
            "sudden clear idea/thought": "brainwave",
            "show neither loss nor profit": "break even",
            "fed up; bored": "browned off",
            "flatter sb": "butter sb up",
            "generally speaking": "by and large",
            "be caught while commiting a crime": "catch sb red-handed",
            "sb who is very like one of his parent": "chip off the old block",
            "very expensive": "cost a bomb",
            "damage one's hopes": "deal a blow to",
            "don't wait for sb/sth anxiously": "don't hold your breath",
            "be a tough bussinesman": "drive a hard bargain",
            "say sth tactlessly": "drop a brick",
            "feeling sth instinctively": "feel in one's bones",
            "take/get revenge": "get your own back",
            "have an obsession about sth": "have a bee in one's bonnet",
            "be very nervous about sth": "have butterflies in one's stomach",
            "in writing": "in black and white",
            "uncertain (2b)": "in the balance",
            "die": "kick the bucket",
            "make public": "lay bare",
            "confess": "make a clean breast of",
            "cause sb to become very angry": "make one's blood boil",
            "without thinking about sth": "on the spur of the moment",
            "suddenly and unexpectedly": "out of the blue",
            "remind sb of sth": "ring a bell",
            "be glad to see sb leave": "see the back of",
            "deal with sth boldly and directly": "take the bull by the horns",
            "dull person who spoils people's happiness": "wet blanket",

            "sth very easy to do": "a piece of cake",
            "a very important day": "a red-letter day",
            "be caught while commiting a crime": "be caught red-handed",
            "be likely to happen": "be on the cards",
            "be elated": "be over the moon",
            "insult sb": "call sb names",
            "preside over a meeting": "chair a meeting",
            "false tears": "crocodile tears",
            "think of sth": "cross one's mind",
            "ignore sb": "cut sb dead",
            "totally different": "different as chalk and cheese",
            "depressed/miserable": "down in the dumps",
            "wasted; lost": "down the drain",
            "get angry, upset or embarrassed": "get a bit hot under the collar",
            "tell sb else about your problem": "get a problem off one's chest",
            "worsen": "go to the dogs",
            "dare to do sth": "have the cheek",
            "not be discouraged": "keep one's chin up",
            "avoid mentioning a subject which could cause trouble": "let sleeping dogs lie",
            "hopeless situation or case": "lost cause",
            "look/be slightly unwell": "off colour",
            "receiving unemployment benefit/social security": "on the dole",
            "act cleverly": "play one's cards right",
            "reveal one's real character": "show one's true colours",
            "with great success": "with flying colours",
            "not assume sth before it happens": "not count one's chickens before they're hatched"
        }
    };
    var se = [];
    var d = {};
    var wn = '';
    var wnk = '';
    var p = 0;
    var m = 0;


    window.onload = function () {
        var k = Object.keys(a);
        for (var i = 0; i < k.length; i++)
            document.getElementById('select').innerHTML += "<label><input type='checkbox' value='" + i + "' checked>" + k[i].toLowerCase() + "</label>";
        document.getElementById('select').innerHTML += "<input type='button' value='rozpocznij' onclick='s()'>";
    }

    function s() {
        var c = document.getElementById('select').getElementsByTagName('input');
        for (var i = 0; i < c.length; i++)
            if (c[i].checked)
                se.push(parseInt(c[i].value));

        l();
    }

    function l() {
        document.getElementById('select').remove();
        document.getElementById('game').style.display = 'block';

        document.onkeydown = function (e) {
            if (e.altKey)
                switch (e.key) {
                    case 's':
                        f('ß');
                        break;
                    case 'o':
                        f('ö');
                        break;
                    case 'u':
                        f('ü');
                        break;
                    case 'a':
                        f('ä');
                        break;
                    case 'ArrowRight':
                        n();
                        break;
                }
        };

        for (var i = 0; i < se.length; i++)
            Object.assign(d, a[Object.keys(a)[se[i]]]);

        us();
        sw();
    }

    function f(a) {
        document.getElementById('word-i').value += a;
        document.getElementById('word-i').focus();
    }

    function sw() {
        var k = Object.keys(d);

        if (k == 0) {
            alert('Wygrałeś!');
            location.reload();
            return;
        }
        var r = k[k.length * Math.random() << 0];

        wn = d[r];
        wnk = r;
        document.getElementById('word').innerHTML = r;

    }

    function c() {

        var ans = document.getElementById('word-i').value;
        document.getElementById('word-i').value = '';
        var iu = document.getElementById('iu').checked;
        var id = document.getElementById('id').checked;

        var wnc = wn;

        if (id) {
            ans = ans.replace('ä', 'a').replace('ö', 'o').replace('ü', 'u').replace('ß', 'ss');
            wnc = wnc.replace('ä', 'a').replace('ö', 'o').replace('ü', 'u').replace('ß', 'ss');
        }

        if (ans == wnc || (iu && ans.toLowerCase() == wnc.toLowerCase())) {
            p++;
            document.body.id = 'y';
            delete d[wnk];

        } else {
            m++;
            document.body.id = 'n';
        }

        us();
        sw();
    }

    function us() {
        document.getElementById('correct').innerHTML = p;
        document.getElementById('incorrect').innerHTML = m;
        document.getElementById('answer').innerHTML = wn;
        document.getElementById('left').innerHTML = Object.keys(d).length;
    }

    function n() {
        wn = '-';
        document.getElementById('word-i').value = '';
        us();
        document.body.id = '';
        sw();
    }
</script>
</body>
</html>
